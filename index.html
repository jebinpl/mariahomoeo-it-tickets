<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>IT Ticketing System</title>

<style>
body{margin:0;font-family:Arial,sans-serif}
.hidden{display:none}
button{cursor:pointer}

/* LOGIN */
#loginPage{
  max-width:320px;
  margin:150px auto;
  padding:20px 25px;
  border:1px solid #ccc;
  text-align:center;
  box-sizing:border-box;
}
#loginPage input{
  width:100%;
  padding:8px;
  margin:6px 0;
  box-sizing:border-box;
}
#loginPage select{
  width:100%;
  padding:8px;
  margin:6px 0;
  box-sizing:border-box;
}

/* HEADER */
.top-header{
  background:#9aa7a7;
  color:white;
  display:flex;
  align-items:center;
  padding:1px 20px;
  position:relative;
}
.logo-left{height:60px;margin-right:20px}
.header-left h1{font-size:52px;margin:0;letter-spacing:4px}
.header-left p{margin:5px 0;font-size:18px}
.header-center{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
}
.header-center h2{margin:0;font-size:30px}

/* NAV */
.nav-bar{
  background:#20f0e0;
  padding:10px;
  display:flex;
  align-items:center;
}
.nav-link{margin:0 18px;font-size:18px;cursor:pointer}
.logout{margin-left:auto;margin-right:20px;font-weight:bold;cursor:pointer}

/* CONTENT */
#content{padding:20px}

/* FORM */
form{background:#f9f9f9;padding:15px;margin:10px 0}
input,select{padding:6px;width:100%;margin:4px 0}

/* TABLE */
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
th{background:#eee}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginPage">
  <h2>Login</h2>

  <select id="roleSelect">
    <option value="">-- Select Role --</option>
    <option value="user">User</option>
    <option value="admin">Admin</option>
  </select>

  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">

  <button onclick="login()">Login</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">

  <!-- HEADER -->
  <div class="top-header">
    <img src="logo.png" class="logo-left">
    <div class="header-left">
      <h1>MARIA</h1>
      <p>Homoeopathic Medical College & Hospital</p>
    </div>
    <div class="header-center">
      <h2>IT Ticketing System</h2>
    </div>
  </div>

  <!-- NAV -->
  <div class="nav-bar">
    <span class="nav-link" onclick="showIssue()">IT-Issue</span>
    <span class="nav-link" onclick="showRequest()">IT-Request</span>
    <span class="nav-link" onclick="showAdmin()">IT-Admin</span>
    <span id="roleDisplay" style="margin-right:10px;font-weight:bold;"></span>
    <span class="logout" onclick="logout()">Logout</span>
  </div>

  <!-- CONTENT -->
  <div id="content">
  <p id="welcomeText">Select a module from above.</p>
    
    <!-- IT ISSUE -->
    <div id="issueModule" class="hidden">
      <h2>IT-Issue</h2>
      <button onclick="openForm()">‚ûï Create Ticket</button>
      <button onclick="exportExcel()">üìä Export Excel</button>

      <form id="ticketForm" class="hidden">
        <input id="division" placeholder="Division" required>
        <input id="department" placeholder="Department" required>
        <input id="description" placeholder="Issue Description" required>
        <button type="submit">Submit</button>
        <button type="button" onclick="closeForm()">Cancel</button>
      </form>

      <table>
        <thead>
          <tr>
            <th>Ticket ID</th>
            <th>Division</th>
            <th>Department</th>
            <th>Description</th>
            <th>Date Created</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="ticketTable"></tbody>
      </table>
    </div>

  </div>
</div>

<!-- LIBRARIES -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<!-- FIREBASE -->
<script>
firebase.initializeApp({
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_DOMAIN",
  projectId: "YOUR_PROJECT_ID"
});
const db = firebase.firestore();
</script>

<!-- LOGIN + ROLE -->
<script>
let ROLE = "";

function login(){
  const role = roleSelect.value;
  const u = username.value.trim();
  const p = password.value.trim();

  if(!role){
    alert("Please select role");
    return;
  }

  if(role==="user" && u==="user" && p==="user123"){
    ROLE="user";
  }
  else if(role==="admin" && u==="admin" && p==="admin123"){
    ROLE="admin";
  }
  else{
    alert("‚ùå Invalid credentials for selected role");
    return;
  }

  loginPage.classList.add("hidden");
  dashboard.classList.remove("hidden");
  document.getElementById("roleDisplay").innerText =
  ROLE === "admin" ? "üë®‚Äçüíº" : "üë§";
  
  // Initial dashboard state: show welcome, hide modules
welcomeText.style.display = "block";
issueModule.classList.add("hidden");
}

function logout(){
  location.reload();
}

function hideAllModules(){
  issueModule.classList.add("hidden");
}

function showIssue(){
  hideAllModules();
  welcomeText.style.display = "none";
  issueModule.classList.remove("hidden");
}

function showRequest(){
  hideAllModules();
  welcomeText.style.display = "none";
  alert("IT-Request module coming next");
}

function showAdmin(){
  hideAllModules();
  welcomeText.style.display = "none";
  alert("IT-Request module coming next");
}
</script>

<!-- IT ISSUE LOGIC -->
<script src="it-issue.js"></script>

</body>
</html>











